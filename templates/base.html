<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
    <meta charset="UTF-8" />
    <title>PayMind</title>

    {% load static %}

    <!-- Tailwind generado por django-tailwind -->
    <link href="{% static 'theme/css/dist/styles.css' %}" rel="stylesheet">


    


    <!-- Heroicons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <!-- Chart.js para gr치ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- CSRF Token para AJAX -->
    {% csrf_token %}
    <meta name="csrf-token" content="{{ csrf_token }}">
</head>

<body class="bg-slate-100 text-slate-900 dark:bg-slate-950 dark:text-slate-100 min-h-screen transition-colors">
    <header class="bg-white dark:bg-slate-900 shadow-sm transition-colors">
    <div class="max-w-5xl mx-auto px-4 py-3 flex flex-wrap items-center justify-between gap-y-2">

        <!-- LOGO -->
        <a href="{% url 'cards_list' %}" class="text-lg font-semibold text-slate-800 dark:text-slate-100 flex-shrink">
            PayMind
        </a>

        <!-- USUARIO + LINKS -->
        <nav class="flex items-center gap-3 text-sm flex-wrap">

            {% if user.is_authenticated %}
                <span class="text-slate-600 dark:text-slate-300 block max-w-[120px] truncate">
                    Hola, <span class="font-medium">{{ user.username }}</span>
                </span>

                <a href="{% url 'cards_list' %}"
                   class="text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-50 whitespace-nowrap">
                    Dashboard
                </a>

                <a href="{% url 'payment_history' %}" class="text-sm text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-50">
                    Historial
                </a>

                <a href="{% url 'info_tdc' %}" class="text-sm text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-50">
                    Informaci칩n de TDC
                </a>


                <a href="{% url 'logout' %}"
                   class="text-red-500 hover:text-red-400 font-medium whitespace-nowrap">
                    Cerrar sesi칩n
                </a>

            {% else %}
                <a href="{% url 'login' %}" class="text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-50">
                    Iniciar sesi칩n
                </a>
                <a href="{% url 'signup' %}" class="text-indigo-600 hover:text-indigo-700 font-medium">
                    Registrarse
                </a>
                <button id="theme-toggle"
                        class="ml-2 px-3 py-1.5 rounded-full border border-slate-200 dark:border-slate-700 text-xs font-medium text-slate-600 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                    Modo oscuro
                </button>
            {% endif %}

        </nav>
    </div>
</header>

    <main class="max-w-5xl mx-auto px-4 py-8 md:py-10">
        {% block content %}{% endblock %}
    </main>

    <script>
        (function () {
            const root = document.documentElement;
            const stored = localStorage.getItem('theme');
            if (stored === 'dark' || (!stored && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                root.classList.add('dark');
            }

            const btn = document.getElementById('theme-toggle');
            if (!btn) {
                feather.replace();
                return;
            }

            const updateLabel = () => {
                const isDark = root.classList.contains('dark');
                btn.textContent = isDark ? 'Modo claro' : 'Modo oscuro';
            };

            updateLabel();

            btn.addEventListener('click', () => {
                const isDark = root.classList.toggle('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                updateLabel();
            });

            feather.replace();
        })();
    </script>
</body>
</html>
